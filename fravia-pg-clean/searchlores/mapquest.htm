<HTML>
<HEAD>
<TITLE>mqform.htm:    MapQuest Lite: AFAAP
</TITLE>
</HEAD>
<BODY bgcolor="#C0C0C0" text="#001010" vlink="#405040" alink="#00FF50">
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" 
WIDTH= "100%"  HEIGHT="22">
<TR><td></td><td>
<!-- Choose  a TITLE and a subtitle, choose well! -->
<center><FONT SIZE="+2">
MapQuest Lite
</fonT><br><FONT SIZE="+1">
CGI-reversing MapQuest
</fonT></center></td><td>
<!-- Choose  a PROJECT GIF, leave this if unsure -->
<center><a href="remobann.htm"><img SRC="images/antiadv.gif" 
ALT="removing banners" ALIGN=CENTER WIDTH=114 HEIGHT=43 BORDER=0 VSPACE=0 
HSPACE=0></a><br><font color=gray>Removing banners</FonT>
</center></td></tr><tR><td bgcolor="#FFFFEA"><center><FONT COLOR="890000">
<!-- CHOOSE A DATE (will probably be changed) -->
June 2000
</FONT></center></td><td bgcolor="#FFFFEA"><center>by <font size=+3>
<!-- CHOOSE A HANDLE , i.e. your pseudo (wont be changed) -->
DarkWyrm
</fonT></center></td><td VALIGN="center" bgcolor="#FFFFEA">

</td></tr><TR><td><center><a href="index.htm" ><img SRC="images/bulletr.gif" ALIGN="BOTTOM" 
BORDER="0" VSPACE="0" HSPACE="0" width="13" height="13"></a></center></td>
<TD BGCOLOR="898030"><center>Courtesy of Fravia's searchlores.org</center> 
</center></TD><td BGCOLOR="898030"><center>

</center></td></TR>
<!-- this is for the data.....fra_00xx....yymmdd....handle..beg+int...not ass... -->
<tr><td><font color="#C4C0CF">fra_00xx<bR>981607<br>[blue]<br>1000<br>AA<br>RB<br></fonT></td>
<td><center>"<i>It dawned on me while getting ready for a 9-hour trip that 1) 
the ads could be largely cut out and that it seemed like the URLs it was using 
seemed *awfully* long. As it turns out, there's a reason for this</i>"<br></center>DarkWyrm
</td><td><center>
<a href="antiadve.htm"><img SRC="images/antiadv.gif" 
ALT="Anti-advertisement" ALIGN=CENTER WIDTH=114 HEIGHT=43 BORDER=0 VSPACE=0 
HSPACE=0></a><br><font color=gray>Anti-advertisement</FonT>
</center>


</td></tr><TR><td></td>
<!-- Leonard Coehn's old song, because we are poets, not only crackers -->
<TD BGCOLOR="898030"><center></i><b>There is a crack, a crack in everything 
That's how the light gets in</b></center>
<!-- Leonard Coehn's old song, because we are poets, not only crackers -->
</center></TD><td></td></TR><TR><td VALIGN= "MIDDLE" 
bgcolor="#C6E7C6"><font color=blue><center>~S~ Rating</FONT></FONT></center>
</TD><td VALIGN = "MIDDLE" bgcolor="#C6E7C6"><font color=blue><center>
<!-- CHOOSE A RATING (may be changed) -->
(x)<B>Beginner</B> ( )<B>Intermediate</B> ( )<B>Advanced</B> ( )<B>Expert</B></FONT>
</center></td><td></td></tr></table>
<!-- END HEAD  --><bR>
<!-- CORPUS  -->
<!-- CHOOSE A COMMENT (may be changed)  -->
MapQuest is, in a way, like a warez site - useful stuff, but ads abound.
<hR><center><FONT SIZE="+2">
<!-- Repeat your TITLE  -->
MapQuest Lite
   </FONT><BR>
   <FONT SIZE="+2">
<!-- Repeat your SUBTITLE -->
CGI-reversing MapQuest
   </FONT><BR><FONT COLOR="0B7FC1">
<!-- REPEAT YOUR CHOSEN HANDLE HERE -->Written by 
DarkWyrm
</FONT></center><br><br>

<!-- INTRO STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Introduction</fonT>
</fonT></center></td></tr></table>
<BR>
<!-- PASTE HERE YOUR INTRODUCTION -->
MapQuest, for the neophyte, is a site which,amongst other things, allows you get 
directions from one city to another simply by typing in the addresses. Quite useful for
those of us who get lost easy. :^D The only problem is that the site itself is
overbloated from the "extras" which it also offers, e.g. places along the way for you
to spend your money (and ads to go with them), channels, and other junk. Some other
decent stuff there, too, (like yellow pages lookups, etc.), but the reason MapQuest
exists is because of its directions.
<!-- TOOLS STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Tools required</fonT>
</fonT></center></td></tr></table>

<!-- PASTE HERE YOUR REQUIRED TOOLS -->
<br>
<UL>
<LI>any browser
<LI>Text editor (I used UltraEdit for this)
<LI>Perl (useful, but not required)
</UL>
<!-- TARGET URL STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Target's URL/FTP</fonT>
</fonT></center></td></tr></table>
<!-- DON'T FORGET TO PASTE HERE THE URL/FTP OF YOUR TARGET(S) -->
<br>
www.mapquest.com
<br>
<!-- PROGRAM HISTORY STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Program History</fonT>
</fonT></center></td></tr></table>
<!-- PASTE HERE YOUR TARGET'S HISTORY (if any) -->
<br>
None.
<br>
<!-- REAL ESSAY  STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Essay</fonT></fonT>
</center></td></tr></table>
<!-- PASTE HERE THE TEXT OF YOUR ESSAY
     THIS IS OF COURSE THE MOST IMPORTANT PART
     PLEASE CHECK THE MARGINS WHEN YOU ARE FINISHED! 
     SHOULD NOT BLAST OPERA'S MARGINS OUT! HAVE A LOOK INSIDE
     YOUR OWN BROWSER WHEN YOU FINISH!  -->

<BR>
For quite a while, MapQuest was really good about its content to advertisement ratio.
Not any more. It's almost sickening when you actually notice how much there is. Have 
a look around first, and you'll see what I mean. 
It dawned on me while getting ready for a 9-hour trip that 1) the ads could be largely
cut out and that it seemed like the URLs it was using seemed *awfully* long. As it 
turns out, there's a reason for this. Although I didn't use +ORC's zen approach, in 
retrospect, it seems like a good hunch works almost as well.<P>

<h3>The URL</h3>
Let's go to MapQuest and get a test URL...<P>
<font size=-1 face=courier>
http://www.mapquest.com/cgi-bin/mqtrip?link=btwn%2Ftwn-ddir_na_basic_form_latw_jp
<br>&uid=uu9c09rws4o7iave%3Ab09wblg08&ADDR_ORIGIN=123+some+st&CITY_ORIGIN=somewhere
<br>&STATE_ORIGIN=xx&ZO=43227&OCC=US&ADDR_DESTINATION=1313+mockingbird+ln
<br>&CITY_DESTINATION=anywhere&STATE_DESTINATION=xx&ZD=12345-6789&DCC=US
<br>&dir=Get+Directions&POIRad=2.0
</font><br><br>
Ick. Lots of stuff, but this provides useful information about what's going on at 
the other side. The /cgi-bin/ (along with the mqtrip? section) clues us into this 
being a CGI script. Here's where knowing a little Perl comes in handy. Each & is 
actually the beginning of a variable processed by the script. If we change the 
values of some of the variables, we can get some interesting effects.<P>
Let's look at the URL a little differently.
<PRE>
http://www.mapquest.com/cgi-bin/mqtrip?
link=btwn%2Ftwn-ddir_na_basic_form_latw_jp
&uid=uu9c09rws4o7iave%3Ab09wblg08
&ADDR_ORIGIN=123+some+st
&CITY_ORIGIN=somewhere
&STATE_ORIGIN=xx
&ZO=54321
&OCC=US
&ADDR_DESTINATION=1313+mockingbird+ln
&CITY_DESTINATION=anywhere
&STATE_DESTINATION=xx
&ZD=12345-6789
&DCC=US
&dir=Get+Directions&POIRad=2.0
</PRE>
Now it starts to make sense...Playing around a little with a URL after we've done 
a search, and we get much, much more than this:<P>
<font size=-1 face=courier color=blue>
link=btwn%2Ftwn-ddir_options_jumppage&avoid_mj_hwy=&avoid_mn_hwy=&avoid_thruways=
<br>&avoid_local=&avoid_frontage=&avoid_ramps=&avoid_allfire=&avoid_ferry=
<br>&avoid_walk=&avoid_lmTD_access=&avoid_toll_roads=&route_type=&ADDR_ORIGIN=
<br>123+some+st&CITY_ORIGIN=somewhere&STATE_ORIGIN=xx&ADDR_DESTINATION=1313+mockingbird+
<br>ln&CITY_DESTINATION=anywhere&STATE_DESTINATION=xx&quest_mode=&results_display_mode=
<br>overview&OPC=&OPL=&DPC=&DPL=&OSAL=&OCAL=&DSAL=&DCAL=&ZO=12345&ZD=12345
<br>&OCC=US&DCC=US&OLL=&DLL=&ORIGIN_NAME=&DEST_NAME=&ORIGIN_STREET_AMBIG_LIST=
<br>&ORIGIN_CITY_AMBIG_LIST=&DEST_STREET_AMBIG_LIST=&DEST_CITY_AMBIG_LIST=&uid=
<br>uu9c09rws4o7iave%3Ab09wblg08&POIRad=2.0&LangOpt=&AB_LABELS=&OAB=&DAB=&MPOICAT1=
<br>&MPOICAT2=&MPOICAT3=&MPOICAT4=&MPOICAT5=&MPOICAT6=
<br>&MPOICAT7=&MPOICAT8=&MPOICAT9=&MPOICAT10=&MPOICAT11=&MPOICAT12=&MPOICAT13=&MPOICAT14=
<br>&MPOICAT15=&MPOICAT16=&MPOICAT17=&MPOICAT18=&MPOICAT19=&MPOICAT20=&MPOICAT21=&MPOICAT22=
<br>&MPOICAT23=&MPOICAT24=&MPOICAT25=&MPOICAT26=&MPOICAT27=&MPOICAT28=&MPOICAT29=&MPOICAT30=
<br>&MPOICAT31=&MPOICAT32=&MPOICAT33=&MPOICAT34=&MPOICAT35=&MPOICAT36=&MPOICAT37=&MPOICAT38=
<br>&MPOICAT39=&MPOICAT40=&MPOICAT41=&MPOICAT42=&MPOICAT43=&MPOICAT44=&MPOICAT45=&MPOICAT46=
<br>&MPOICAT47=&printer.x=77&printer.y=4
</font><br><br>
It makes sense that a "big" company (compared to us peons) uses big complex CGIs, but this 
is absurd. If you look closely at the above listing, there's a lot of 
&something=&somethingelse= stuff. These are vars which aren't assigned a value. *Stuff to 
play with* Now that we have some things to figure out how they work and what 
they do. *evil grin*
<P>
CGI scripts, unless done _very_ carefully, tend to give the smarter-than-the-average-user 
more info than they bargain for. If one simply goes to the Driving Directions page and looks 
at the source (ugly as it is), there are some useful clues and outright answers to our 
questions. If we search for all this MPOICAT jazz, we find this (names changed to protect the
guilty):
<br><br><font size=-1 face=courier color=blue>
&lt INPUT type="checkbox" name="MPOICAT9" value="11158"&gt&lt IMG 
<br>/loadimage?http://mqgraphics.mapquest.com/gif/mb-button-lennys2.gif" width=72 height=15 
<br>border=0 alt="Lenny's Restaurant"&gt 
</font><br><br>
Lovely. An ad. Well, we know that all that stuff is junk for our purposes - a lean method 
for getting directions. Other tags are blatantly obvious (STATE_DESTINATION, etc.), so let's
pick the real juicy one: the printer friendly page. 

<h3>Ads removed</h3>
It has only one ad (easily killed by Proxomitron) and, thus, is a real prize. How do we 
figure it out? Easy. MapQuest does most of it for us - the "printer-friendly" page is 
also more user-friendly. It is only offered to us after we've endured 2 pages (or more) of 
ad-laden crap. Why not cut straight to it? Looking earlier in the source for something 
(try "printer" on a search results page) and it pops out here
<P>
<PRE>
.
-more code here-
.
mqgraphics.mapquest.com/gif/printer.gif
.
-more code here-
.
</PRE>
This doesn't look like anything useful, but sniffing around it gives us this:
<PRE>
    FORM method=get action="/cgi-bin/mqtrip"
     INPUT type=hidden name=link value=btwn/twn-ddir_options_jumppage
! Opening ../../html/bglobal/ddir-route_form.html 

INPUT TYPE=HIDDEN NAME="avoid_mj_hwy" VALUE=""
</PRE>
Interesting... the link= value changes - we change CGI scripts! A nugget of VERY useful 
information. If we came up with a form that, say, never requested anything but this form, 
we would have something wouldn't we?
<P>
<h3>The new, improved MapQuest form</h3>
I already did it - swiped quite a bit of it right from the site itself and heavily 
modified it. You can find it 
<font color=blue>[</font><a href="newmq.htm">here</a><font color=blue>]</font>.
<br><br>
<!-- FINAL NOTES STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Final Notes</fonT>
</fonT></center></td></tr></table>

This work, as +fravia is so fond of saying, is <i>in fieri</i>. I haven't bothered to put in a 
way to avoid_highways, for example. My forms coding is a little rusty. It's a good 
start, and workable. Seekers need to know when it's ok to be lazy and when it's not ok.
This'll work until after my trip. I'd appreciate any input and/or feedback, too.
<!-- PASTE HERE YOUR FINAL NOTES (if any) -->
<br><br>

<!-- OH DUH STARTS HERE -->
<TABLE CELLPADDING="1" CELLSPACING="2" BORDER="1" WIDTH= "100%"  HEIGHT="22" >
<tr><td bgcolor="#C6E7C6"><center><font size=+2><font color=blue>Ob Duh</fonT></fonT>
</center></td></tr></table><center><i>I won't bother going any further to explain why 
we all need to BUILD and distribute to others our tools and bots with which to fight 
(or disrupt ;^)) the crap which commercial sites thrust upon us, regardless of our 
own desires. It drives the message home to the advertisers' pocketbooks when one of 
their sleazy ploys doesn't work!
</i></center><br><br>

<!-- WAY OUT STARTS HERE -->

</font>
<!-- internet searching strategies and hints content, end -->
<center><a href="antiadve.htm"><img SRC="images/antiadv.gif" ALT="antiadv" BORDER=0 
height=43 width=114 align=BOTTOM></a><br><br>
<!-- how to search the web, by fravia+, signet begin -->
<table><tR><td width="300" height="2" bgcolor="#993300"></tD></tR></table>
<IMG align=center valign=center width=500 height=4
images/dot_peri.gif"><bR><IMG align=center valign=center width=5
height=40 SRC="images/dot_peri.gif">
(c) 2000: <font color=blue>[</font><a
info.htm">fravia+</a><font color=blue><font
color=blue>]</fonT></font>, all rights reserved
<IMG align=center valign=center width=5 height=40
images/dot_peri.gif"><br><!-- how to search the web, by fravia+,
signet end -->


<!-- begin da closing bit, duh -->


<!-- begin da closing bit, duh -->
</CENTER>
</body>
</HTML>
